const translations = {
  en: {
    settings: "Settings",
    newGame: "New Game",
    switchSides: "Switch Sides",
    undo: "Undo",
    aiDifficulty: "AI Difficulty:",
    easy: "ğŸŸ¢ Easy (Level 1)",
    medium: "ğŸŸ¡ Medium (Level 2)",
    hard: "ğŸ”´ Hard (Level 3)",
    expert: "ğŸ’€ Expert (Level 4)",
    moves: "Moves",
    captured: "Captured",
    whiteCaptured: "White Captured",
    blackCaptured: "Black Captured",
    gameStarting: "Game Starting...",
    blackWon: "ğŸ† Black Won!",
    whiteWon: "ğŸ† White Won!",
    whitePlaying: "White Playing",
    blackPlaying: "Black Playing",
    moveHistory: "Move History",
    switchedToBlack: "You are now playing BLACK!",
    switchedToWhite: "You are now playing WHITE!",
    aiLevelSet: "AI difficulty: Level",
    footerText: "Â© 2025",
    startGame: "START GAME",
    gameTitle: "â™” 4Ã—5 Chess Pro â™š",
    gameSubtitle: "Strategic Mastery in Minimal Space",
    playAgain: "PLAY AGAIN",
    mainMenu: "MAIN MENU",
    gameOver: "GAME OVER",
    reviewGame: "REVIEW GAME",
  },
  tr: {
    settings: "Ayarlar",
    newGame: "Yeni Oyun",
    switchSides: "Taraf DeÄŸiÅŸtir",
    undo: "Geri Al",
    aiDifficulty: "AI ZorluÄŸu:",
    easy: "ğŸŸ¢ Kolay (Seviye 1)",
    medium: "ğŸŸ¡ Orta (Seviye 2)",
    hard: "ğŸ”´ Zor (Seviye 3)",
    expert: "ğŸ’€ Uzman (Seviye 4)",
    moves: "Hamle",
    captured: "AlÄ±nan",
    whiteCaptured: "Beyaz AldÄ±",
    blackCaptured: "Siyah AldÄ±",
    gameStarting: "Oyun BaÅŸlÄ±yor...",
    blackWon: "ğŸ† Siyah KazandÄ±!",
    whiteWon: "ğŸ† Beyaz KazandÄ±!",
    whitePlaying: "Beyaz Oynuyor",
    blackPlaying: "Siyah Oynuyor",
    moveHistory: "Hamle GeÃ§miÅŸi",
    switchedToBlack: "ArtÄ±k SÄ°YAH oynuyorsunuz!",
    switchedToWhite: "ArtÄ±k BEYAZ oynuyorsunuz!",
    aiLevelSet: "AI zorluÄŸu: Seviye",
    footerText: "Â© 2025",
    startGame: "OYUNA BAÅLA",
    gameTitle: "â™” 4Ã—5 SatranÃ§ Pro â™š",
    gameSubtitle: "Minimum Alanda Stratejik UstalÄ±k",
    playAgain: "TEKRAR OYNA",
    mainMenu: "ANA MENÃœ",
    gameOver: "OYUN BÄ°TTÄ°",
    reviewGame: "OYUNU Ä°NCELE",
  },
  es: {
    settings: "Ajustes",
    newGame: "Nuevo Juego",
    switchSides: "Cambiar Lados",
    undo: "Deshacer",
    aiDifficulty: "Dificultad IA:",
    easy: "ğŸŸ¢ FÃ¡cil (Nivel 1)",
    medium: "ğŸŸ¡ Medio (Nivel 2)",
    hard: "ğŸ”´ DifÃ­cil (Nivel 3)",
    expert: "ğŸ’€ Experto (Nivel 4)",
    moves: "Movimientos",
    captured: "Capturados",
    whiteCaptured: "Blancas Capturaron",
    blackCaptured: "Negras Capturaron",
    gameStarting: "Juego Comenzando...",
    blackWon: "ğŸ† Â¡Negras Ganan!",
    whiteWon: "ğŸ† Â¡Blancas Ganan!",
    whitePlaying: "Juegan Blancas",
    blackPlaying: "Juegan Negras",
    moveHistory: "Historial",
    switchedToBlack: "Â¡Ahora juegas con NEGRAS!",
    switchedToWhite: "Â¡Ahora juegas con BLANCAS!",
    aiLevelSet: "Dificultad IA: Nivel",
    footerText: "Â© 2025",
  },
  fr: {
    settings: "ParamÃ¨tres",
    newGame: "Nouvelle Partie",
    switchSides: "Changer de CÃ´tÃ©",
    undo: "Annuler",
    aiDifficulty: "DifficultÃ© IA:",
    easy: "ğŸŸ¢ Facile (Niveau 1)",
    medium: "ğŸŸ¡ Moyen (Niveau 2)",
    hard: "ğŸ”´ Difficile (Niveau 3)",
    expert: "ğŸ’€ Expert (Niveau 4)",
    moves: "Coups",
    captured: "CapturÃ©s",
    whiteCaptured: "Blancs ont pris",
    blackCaptured: "Noirs ont pris",
    gameStarting: "La partie commence...",
    blackWon: "ğŸ† Les Noirs gagnent!",
    whiteWon: "ğŸ† Les Blancs gagnent!",
    whitePlaying: "Les Blancs jouent",
    blackPlaying: "Les Noirs jouent",
    moveHistory: "Historique",
    switchedToBlack: "Vous jouez maintenant les NOIRS!",
    switchedToWhite: "Vous jouez maintenant les BLANCS!",
    aiLevelSet: "DifficultÃ© IA: Niveau",
    footerText: "Â© 2025",
  },
  de: {
    settings: "Einstellungen",
    newGame: "Neues Spiel",
    switchSides: "Seiten Wechseln",
    undo: "RÃ¼ckgÃ¤ngig",
    aiDifficulty: "KI-Schwierigkeit:",
    easy: "ğŸŸ¢ Leicht (Stufe 1)",
    medium: "ğŸŸ¡ Mittel (Stufe 2)",
    hard: "ğŸ”´ Schwer (Stufe 3)",
    expert: "ğŸ’€ Experte (Stufe 4)",
    moves: "ZÃ¼ge",
    captured: "Gefangen",
    whiteCaptured: "WeiÃŸ hat gefangen",
    blackCaptured: "Schwarz hat gefangen",
    gameStarting: "Spiel beginnt...",
    blackWon: "ğŸ† Schwarz gewinnt!",
    whiteWon: "ğŸ† WeiÃŸ gewinnt!",
    whitePlaying: "WeiÃŸ am Zug",
    blackPlaying: "Schwarz am Zug",
    moveHistory: "Zughistorie",
    switchedToBlack: "Sie spielen jetzt SCHWARZ!",
    switchedToWhite: "Sie spielen jetzt WEISS!",
    aiLevelSet: "KI-Schwierigkeit: Stufe",
    footerText: "Â© 2025",
  },
  it: {
    settings: "Impostazioni",
    newGame: "Nuova Partita",
    switchSides: "Cambia Lato",
    undo: "Annulla",
    aiDifficulty: "DifficoltÃ  IA:",
    easy: "ğŸŸ¢ Facile (Livello 1)",
    medium: "ğŸŸ¡ Medio (Livello 2)",
    hard: "ğŸ”´ Difficile (Livello 3)",
    expert: "ğŸ’€ Esperto (Livello 4)",
    moves: "Mosse",
    captured: "Catturati",
    whiteCaptured: "Bianco ha catturato",
    blackCaptured: "Nero ha catturato",
    gameStarting: "Inizio partita...",
    blackWon: "ğŸ† Vince il Nero!",
    whiteWon: "ğŸ† Vince il Bianco!",
    whitePlaying: "Tocca al Bianco",
    blackPlaying: "Tocca al Nero",
    moveHistory: "Cronologia",
    switchedToBlack: "Ora giochi con il NERO!",
    switchedToWhite: "Ora giochi con il BIANCO!",
    aiLevelSet: "DifficoltÃ  IA: Livello",
    footerText: "Â© 2025",
  },
  ru: {
    settings: "ĞĞ°ÑÑ‚Ñ€Ğ¾Ğ¹ĞºĞ¸",
    newGame: "ĞĞ¾Ğ²Ğ°Ñ Ğ¸Ğ³Ñ€Ğ°",
    switchSides: "Ğ¡Ğ¼ĞµĞ½Ğ¸Ñ‚ÑŒ ÑÑ‚Ğ¾Ñ€Ğ¾Ğ½Ñƒ",
    undo: "ĞÑ‚Ğ¼ĞµĞ½Ğ¸Ñ‚ÑŒ",
    aiDifficulty: "Ğ¡Ğ»Ğ¾Ğ¶Ğ½Ğ¾ÑÑ‚ÑŒ Ğ˜Ğ˜:",
    easy: "ğŸŸ¢ Ğ›ĞµĞ³ĞºĞ¾ (Ğ£Ñ€. 1)",
    medium: "ğŸŸ¡ Ğ¡Ñ€ĞµĞ´Ğ½Ğµ (Ğ£Ñ€. 2)",
    hard: "ğŸ”´ Ğ¡Ğ»Ğ¾Ğ¶Ğ½Ğ¾ (Ğ£Ñ€. 3)",
    expert: "ğŸ’€ Ğ­ĞºÑĞ¿ĞµÑ€Ñ‚ (Ğ£Ñ€. 4)",
    moves: "Ğ¥Ğ¾Ğ´Ñ‹",
    captured: "Ğ’Ğ·ÑÑ‚Ğ¾",
    whiteCaptured: "Ğ‘ĞµĞ»Ñ‹Ğµ Ğ²Ğ·ÑĞ»Ğ¸",
    blackCaptured: "Ğ§ĞµÑ€Ğ½Ñ‹Ğµ Ğ²Ğ·ÑĞ»Ğ¸",
    gameStarting: "Ğ˜Ğ³Ñ€Ğ° Ğ½Ğ°Ñ‡Ğ¸Ğ½Ğ°ĞµÑ‚ÑÑ...",
    blackWon: "ğŸ† Ğ§ĞµÑ€Ğ½Ñ‹Ğµ Ğ¿Ğ¾Ğ±ĞµĞ´Ğ¸Ğ»Ğ¸!",
    whiteWon: "ğŸ† Ğ‘ĞµĞ»Ñ‹Ğµ Ğ¿Ğ¾Ğ±ĞµĞ´Ğ¸Ğ»Ğ¸!",
    whitePlaying: "Ğ¥Ğ¾Ğ´ Ğ±ĞµĞ»Ñ‹Ñ…",
    blackPlaying: "Ğ¥Ğ¾Ğ´ Ñ‡ĞµÑ€Ğ½Ñ‹Ñ…",
    moveHistory: "Ğ˜ÑÑ‚Ğ¾Ñ€Ğ¸Ñ Ñ…Ğ¾Ğ´Ğ¾Ğ²",
    switchedToBlack: "Ğ’Ñ‹ Ğ¸Ğ³Ñ€Ğ°ĞµÑ‚Ğµ Ğ·Ğ° Ğ§Ğ•Ğ ĞĞ«Ğ¥!",
    switchedToWhite: "Ğ’Ñ‹ Ğ¸Ğ³Ñ€Ğ°ĞµÑ‚Ğµ Ğ·Ğ° Ğ‘Ğ•Ğ›Ğ«Ğ¥!",
    aiLevelSet: "Ğ¡Ğ»Ğ¾Ğ¶Ğ½Ğ¾ÑÑ‚ÑŒ Ğ˜Ğ˜: Ğ£Ñ€Ğ¾Ğ²ĞµĞ½ÑŒ",
    footerText: "Â© 2025",
  },
  zh: {
    settings: "è®¾ç½®",
    newGame: "æ–°æ¸¸æˆ",
    switchSides: "äº¤æ¢æ–¹",
    undo: "æ’¤é”€",
    aiDifficulty: "AI éš¾åº¦:",
    easy: "ğŸŸ¢ ç®€å• (ç­‰çº§ 1)",
    medium: "ğŸŸ¡ ä¸­ç­‰ (ç­‰çº§ 2)",
    hard: "ğŸ”´ å›°éš¾ (ç­‰çº§ 3)",
    expert: "ğŸ’€ ä¸“å®¶ (ç­‰çº§ 4)",
    moves: "æ­¥æ•°",
    captured: "åƒå­",
    whiteCaptured: "ç™½æ–¹åƒå­",
    blackCaptured: "é»‘æ–¹åƒå­",
    gameStarting: "æ¸¸æˆå¼€å§‹...",
    blackWon: "ğŸ† é»‘æ–¹è·èƒœ!",
    whiteWon: "ğŸ† ç™½æ–¹è·èƒœ!",
    whitePlaying: "ç™½æ–¹èµ°æ£‹",
    blackPlaying: "é»‘æ–¹èµ°æ£‹",
    moveHistory: "èµ°æ£‹è®°å½•",
    switchedToBlack: "ä½ ç°åœ¨æ‰§é»‘!",
    switchedToWhite: "ä½ ç°åœ¨æ‰§ç™½!",
    aiLevelSet: "AI éš¾åº¦: ç­‰çº§",
    footerText: "Â© 2025",
  },
  ja: {
    settings: "è¨­å®š",
    newGame: "æ–°ã—ã„ã‚²ãƒ¼ãƒ ",
    switchSides: "ã‚µã‚¤ãƒ‰äº¤ä»£",
    undo: "å…ƒã«æˆ»ã™",
    aiDifficulty: "AI é›£æ˜“åº¦:",
    easy: "ğŸŸ¢ ç°¡å˜ (Lv 1)",
    medium: "ğŸŸ¡ æ™®é€š (Lv 2)",
    hard: "ğŸ”´ é›£ã—ã„ (Lv 3)",
    expert: "ğŸ’€ é”äºº (Lv 4)",
    moves: "æ‰‹æ•°",
    captured: "ç²å¾—",
    whiteCaptured: "ç™½ã®ç²å¾—",
    blackCaptured: "é»’ã®ç²å¾—",
    gameStarting: "ã‚²ãƒ¼ãƒ é–‹å§‹...",
    blackWon: "ğŸ† é»’ã®å‹ã¡!",
    whiteWon: "ğŸ† ç™½ã®å‹ã¡!",
    whitePlaying: "ç™½ã®æ‰‹ç•ª",
    blackPlaying: "é»’ã®æ‰‹ç•ª",
    moveHistory: "å±¥æ­´",
    switchedToBlack: "ã‚ãªãŸã¯ä»Šã€é»’ã§ã™!",
    switchedToWhite: "ã‚ãªãŸã¯ä»Šã€ç™½ã§ã™!",
    aiLevelSet: "AI é›£æ˜“åº¦: ãƒ¬ãƒ™ãƒ«",
    footerText: "Â© 2025",
  },
  pt: {
    settings: "ConfiguraÃ§Ãµes",
    newGame: "Novo Jogo",
    switchSides: "Trocar Lados",
    undo: "Desfazer",
    aiDifficulty: "Dificuldade IA:",
    easy: "ğŸŸ¢ FÃ¡cil (NÃ­vel 1)",
    medium: "ğŸŸ¡ MÃ©dio (NÃ­vel 2)",
    hard: "ğŸ”´ DifÃ­cil (NÃ­vel 3)",
    expert: "ğŸ’€ Especialista (NÃ­vel 4)",
    moves: "Jogadas",
    captured: "Capturas",
    whiteCaptured: "Brancas Capturaram",
    blackCaptured: "Pretas Capturaram",
    gameStarting: "Iniciando jogo...",
    blackWon: "ğŸ† Pretas Venceram!",
    whiteWon: "ğŸ† Brancas Venceram!",
    whitePlaying: "Vez das Brancas",
    blackPlaying: "Vez das Pretas",
    moveHistory: "HistÃ³rico",
    switchedToBlack: "Agora vocÃª joga com as PRETAS!",
    switchedToWhite: "Agora vocÃª joga com as BRANCAS!",
    aiLevelSet: "Dificuldade IA: NÃ­vel",
    footerText: "Â© 2025",
  },
  ar: {
    settings: "Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª",
    newGame: "Ù„Ø¹Ø¨Ø© Ø¬Ø¯ÙŠØ¯Ø©",
    switchSides: "ØªØ¨Ø¯ÙŠÙ„ Ø§Ù„Ø¬ÙˆØ§Ù†Ø¨",
    undo: "ØªØ±Ø§Ø¬Ø¹",
    aiDifficulty: "ØµØ¹ÙˆØ¨Ø© Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ:",
    easy: "ğŸŸ¢ Ø³Ù‡Ù„ (Ù…Ø³ØªÙˆÙ‰ 1)",
    medium: "ğŸŸ¡ Ù…ØªÙˆØ³Ø· (Ù…Ø³ØªÙˆÙ‰ 2)",
    hard: "ğŸ”´ ØµØ¹Ø¨ (Ù…Ø³ØªÙˆÙ‰ 3)",
    expert: "ğŸ’€ Ø®Ø¨ÙŠØ± (Ù…Ø³ØªÙˆÙ‰ 4)",
    moves: "Ù†Ù‚Ù„Ø§Øª",
    captured: "Ù‚Ø·Ø¹ Ù…Ø£Ø®ÙˆØ°Ø©",
    whiteCaptured: "Ø£Ø¨ÙŠØ¶ Ø£Ø®Ø°",
    blackCaptured: "Ø£Ø³ÙˆØ¯ Ø£Ø®Ø°",
    gameStarting: "Ø¨Ø¯Ø¡ Ø§Ù„Ù„Ø¹Ø¨Ø©...",
    blackWon: "ğŸ† ÙØ§Ø² Ø§Ù„Ø£Ø³ÙˆØ¯!",
    whiteWon: "ğŸ† ÙØ§Ø² Ø§Ù„Ø£Ø¨ÙŠØ¶!",
    whitePlaying: "Ø¯ÙˆØ± Ø§Ù„Ø£Ø¨ÙŠØ¶",
    blackPlaying: "Ø¯ÙˆØ± Ø§Ù„Ø£Ø³ÙˆØ¯",
    moveHistory: "Ø³Ø¬Ù„ Ø§Ù„Ù†Ù‚Ù„Ø§Øª",
    switchedToBlack: "Ø£Ù†Øª ØªÙ„Ø¹Ø¨ Ø§Ù„Ø¢Ù† Ø¨Ø§Ù„Ø£Ø³ÙˆØ¯!",
    switchedToWhite: "Ø£Ù†Øª ØªÙ„Ø¹Ø¨ Ø§Ù„Ø¢Ù† Ø¨Ø§Ù„Ø£Ø¨ÙŠØ¶!",
    aiLevelSet: "ØµØ¹ÙˆØ¨Ø© Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ: Ù…Ø³ØªÙˆÙ‰",
    footerText: "Â© 2025",
  },
};

let currentLang = "en";

function setLanguage(lang) {
  if (!translations[lang]) return;
  currentLang = lang;
  updateUIText();
  localStorage.setItem("4x5_lang", lang);

  // Update HTML dir attribute for RTL support (Arabic)
  if (lang === "ar") {
    document.documentElement.setAttribute("dir", "rtl");
  } else {
    document.documentElement.setAttribute("dir", "ltr");
  }
}

function t(key) {
  return translations[currentLang][key] || translations["en"][key] || key;
}

function updateUIText() {
  // Update Start Screen elements
  const startTitle = document.getElementById("startTitle");
  if (startTitle) startTitle.textContent = t("gameTitle");

  const startSubtitle = document.getElementById("startSubtitle");
  if (startSubtitle) startSubtitle.textContent = t("gameSubtitle");

  const btnStartGame = document.getElementById("btnStartGame");
  if (btnStartGame) btnStartGame.textContent = `â–¶ ${t("startGame")}`;

  const startDifficulty = document.getElementById("startDifficulty");
  if (startDifficulty) {
    startDifficulty.options[0].textContent = t("easy");
    startDifficulty.options[1].textContent = t("medium");
    startDifficulty.options[2].textContent = t("hard");
    startDifficulty.options[3].textContent = t("expert");
  }

  // Update Game Over Screen elements
  const gameOverTitle = document.getElementById("gameOverTitle");
  if (gameOverTitle) gameOverTitle.textContent = t("gameOver");

  const btnPlayAgain = document.getElementById("btnPlayAgain");
  if (btnPlayAgain) btnPlayAgain.textContent = `ğŸ”„ ${t("playAgain")}`;

  const btnMainMenu = document.getElementById("btnMainMenu");
  if (btnMainMenu) btnMainMenu.textContent = `ğŸ  ${t("mainMenu")}`;

  const btnReviewGame = document.getElementById("btnReviewGame");
  if (btnReviewGame) btnReviewGame.textContent = `ğŸ‘€ ${t("reviewGame")}`;

  // Update static elements
  const settingsTitle = document.getElementById("settingsTitle");
  if (settingsTitle) settingsTitle.innerHTML = `<span class="icon">ğŸ¯</span> ${t("settings")}`;

  const btnNewGame = document.getElementById("btnNewGame");
  if (btnNewGame) btnNewGame.textContent = `ğŸ”„ ${t("newGame")}`;

  const btnSwitchSides = document.getElementById("btnSwitchSides");
  if (btnSwitchSides) btnSwitchSides.textContent = `ğŸ”€ ${t("switchSides")}`;

  const btnUndo = document.getElementById("btnUndo");
  if (btnUndo) btnUndo.textContent = `â†©ï¸ ${t("undo")}`;

  const lblAiDifficulty = document.getElementById("lblAiDifficulty");
  if (lblAiDifficulty) lblAiDifficulty.textContent = `âš™ï¸ ${t("aiDifficulty")}`;

  // Update options in main settings select
  const aiSelect = document.getElementById("aiLevel");
  if (aiSelect) {
    aiSelect.options[0].textContent = t("easy");
    aiSelect.options[1].textContent = t("medium");
    aiSelect.options[2].textContent = t("hard");
    aiSelect.options[3].textContent = t("expert");
  }

  const lblMoves = document.getElementById("lblMoves");
  if (lblMoves) lblMoves.textContent = t("moves");

  const lblCaptured = document.getElementById("lblCaptured");
  if (lblCaptured) lblCaptured.textContent = t("captured");

  const lblWhiteCaptured = document.getElementById("lblWhiteCaptured");
  if (lblWhiteCaptured) lblWhiteCaptured.innerHTML = `<span class="icon">âšª</span> ${t("whiteCaptured")}`;

  const lblBlackCaptured = document.getElementById("lblBlackCaptured");
  if (lblBlackCaptured) lblBlackCaptured.innerHTML = `<span class="icon">âš«</span> ${t("blackCaptured")}`;

  const historyTitle = document.getElementById("historyTitle");
  if (historyTitle) historyTitle.innerHTML = `<span class="icon">ğŸ“œ</span> ${t("moveHistory")}`;

  // Update game status if game is active
  if (typeof bilgiGuncelle === "function") {
    bilgiGuncelle();
  }
}

// Initialize language from local storage or default to English
document.addEventListener("DOMContentLoaded", () => {
  const savedLang = localStorage.getItem("4x5_lang");
  if (savedLang && translations[savedLang]) {
    document.getElementById("languageSelect").value = savedLang;
    setLanguage(savedLang);
  } else {
    setLanguage("en");
  }
});
